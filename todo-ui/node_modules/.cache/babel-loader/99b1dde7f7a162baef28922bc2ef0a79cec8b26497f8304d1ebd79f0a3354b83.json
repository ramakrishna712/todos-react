{"ast":null,"code":"import axios from\"axios\";import{useFormik}from\"formik\";import{useEffect,useState}from\"react\";import{useCookies}from\"react-cookie\";import{useNavigate,useParams,Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function ToDoEditAppointment(){var _formik$values$Date;const[appointment,setAppointment]=useState(null);// Initialize as null\nconst[loading,setLoading]=useState(true);// Track loading state\nconst[error,setError]=useState(null);// Track error state\nconst[cookies]=useCookies(['userid']);const params=useParams();const navigate=useNavigate();const apiUrl=process.env.REACT_APP_API_URL;const formik=useFormik({initialValues:{AppointmentId:(appointment===null||appointment===void 0?void 0:appointment.AppointmentId)||\"\",Title:(appointment===null||appointment===void 0?void 0:appointment.Title)||\"\",Description:(appointment===null||appointment===void 0?void 0:appointment.Description)||\"\",Date:(appointment===null||appointment===void 0?void 0:appointment.Date)||\"\",UserId:cookies['userid']||\"\"},enableReinitialize:true,// Allow formik to reinitialize with new data\nonSubmit:task=>{axios.put(`${apiUrl}/edit-appointment/${params.id}`,task).then(()=>{alert(\"Appointment Modified Successfully...\");navigate(`/todo-details/${params.id}`);}).catch(err=>{console.error(\"Error updating appointment:\",err);alert(\"Failed to update the appointment.\");});}});useEffect(()=>{axios.get(`${apiUrl}/get-appointment/${params.id}`).then(response=>{setAppointment(response.data);// Set appointment data\nsetLoading(false);}).catch(err=>{console.error(\"Error fetching appointment:\",err);setError(\"Failed to load appointment details.\");setLoading(false);});},[params.id,apiUrl]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error});}if(!appointment){return/*#__PURE__*/_jsx(\"div\",{children:\"No appointment details found.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light m-2 p-2\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Appointment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"Appointment Id\"}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"AppointmentId\",onChange:formik.handleChange,value:formik.values.AppointmentId,readOnly:true,className:\"form-control\"})}),/*#__PURE__*/_jsx(\"dt\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Title\",onChange:formik.handleChange,value:formik.values.Title,className:\"form-control\"})}),/*#__PURE__*/_jsx(\"dt\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"textarea\",{name:\"Description\",value:formik.values.Description,onChange:formik.handleChange,className:\"form-control\"})}),/*#__PURE__*/_jsx(\"dt\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"Date\",value:(_formik$values$Date=formik.values.Date)===null||_formik$values$Date===void 0?void 0:_formik$values$Date.split(\"T\")[0],onChange:formik.handleChange,className:\"form-control\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Save\"}),/*#__PURE__*/_jsx(Link,{to:`/todo-details/${params.id}`,className:\"btn btn-danger ms-2\",children:\"Cancel\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-dark mt-2 text-center \",children:\"Back to Home\"})]});}","map":{"version":3,"names":["axios","useFormik","useEffect","useState","useCookies","useNavigate","useParams","Link","jsx","_jsx","jsxs","_jsxs","ToDoEditAppointment","_formik$values$Date","appointment","setAppointment","loading","setLoading","error","setError","cookies","params","navigate","apiUrl","process","env","REACT_APP_API_URL","formik","initialValues","AppointmentId","Title","Description","Date","UserId","enableReinitialize","onSubmit","task","put","id","then","alert","catch","err","console","get","response","data","children","className","handleSubmit","type","name","onChange","handleChange","value","values","readOnly","split","to"],"sources":["C:/Users/Rama Krishna/todos-react/todo-ui/src/components/todo-edit-appointment.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useFormik } from \"formik\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate, useParams, Link } from \"react-router-dom\";\r\n\r\nexport function ToDoEditAppointment() {\r\n    const [appointment, setAppointment] = useState(null); // Initialize as null\r\n    const [loading, setLoading] = useState(true); // Track loading state\r\n    const [error, setError] = useState(null); // Track error state\r\n    const [cookies] = useCookies(['userid']);\r\n    const params = useParams();\r\n    const navigate = useNavigate();\r\n    const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            AppointmentId: appointment?.AppointmentId || \"\",\r\n            Title: appointment?.Title || \"\",\r\n            Description: appointment?.Description || \"\",\r\n            Date: appointment?.Date || \"\",\r\n            UserId: cookies['userid'] || \"\"\r\n        },\r\n        enableReinitialize: true, // Allow formik to reinitialize with new data\r\n        onSubmit: (task) => {\r\n            axios\r\n                .put(`${apiUrl}/edit-appointment/${params.id}`, task)\r\n                .then(() => {\r\n                    alert(\"Appointment Modified Successfully...\");\r\n                    navigate(`/todo-details/${params.id}`);\r\n                })\r\n                .catch((err) => {\r\n                    console.error(\"Error updating appointment:\", err);\r\n                    alert(\"Failed to update the appointment.\");\r\n                });\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(`${apiUrl}/get-appointment/${params.id}`)\r\n            .then((response) => {\r\n                setAppointment(response.data); // Set appointment data\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                console.error(\"Error fetching appointment:\", err);\r\n                setError(\"Failed to load appointment details.\");\r\n                setLoading(false);\r\n            });\r\n    }, [params.id, apiUrl]);\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"alert alert-danger\">{error}</div>;\r\n    }\r\n\r\n    if (!appointment) {\r\n        return <div>No appointment details found.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-light m-2 p-2\">\r\n            <h2>Edit Appointment</h2>\r\n            <form onSubmit={formik.handleSubmit}>\r\n                <dl>\r\n                    <dt>Appointment Id</dt>\r\n                    <dd>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"AppointmentId\"\r\n                            onChange={formik.handleChange}\r\n                            value={formik.values.AppointmentId}\r\n                            readOnly\r\n                            className=\"form-control\"\r\n                        />\r\n                    </dd>\r\n                    <dt>Title</dt>\r\n                    <dd>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"Title\"\r\n                            onChange={formik.handleChange}\r\n                            value={formik.values.Title}\r\n                            className=\"form-control\"\r\n                        />\r\n                    </dd>\r\n                    <dt>Description</dt>\r\n                    <dd>\r\n                        <textarea\r\n                            name=\"Description\"\r\n                            value={formik.values.Description}\r\n                            onChange={formik.handleChange}\r\n                            className=\"form-control\"\r\n                        />\r\n                    </dd>\r\n                    <dt>Date</dt>\r\n                    <dd>\r\n                        <input\r\n                            type=\"date\"\r\n                            name=\"Date\"\r\n                            value={formik.values.Date?.split(\"T\")[0]}\r\n                            onChange={formik.handleChange}\r\n                            className=\"form-control\"\r\n                        />\r\n                    </dd>\r\n                </dl>\r\n                <button type=\"submit\" className=\"btn btn-success\">Save</button>\r\n                <Link to={`/todo-details/${params.id}`} className=\"btn btn-danger ms-2\">Cancel</Link>\r\n            </form>\r\n            <Link to=\"/\" className=\"btn btn-dark mt-2 text-center \">Back to Home</Link>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}